<!-- Be Naame Khoda -->
<!-- FileName: wwwroot/events.html -->

<div class="card">
    <div class="card-header">
        <h2>Events</h2>
    </div>
    <div class="card-body">
        <p>Manage your triggers here:</p>
        <button id="new-trigger-button" class="btn btn-success mb-3" onclick="openNewTriggerModal()">
            <i class="fas fa-plus"></i> New Trigger
        </button>
        <div id="loading-spinner" class="text-center" style="display: none;">
            <i class="fas fa-spinner fa-spin fa-3x"></i>
            <p>Loading Events...</p>
        </div>
        <div id="events-list-content" style="display:none;">
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Event Name</th>
                         <th>Type</th>
                        <th>Time</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="events-list-body">
                    <!-- Dynamic trigger content will be loaded here -->
                </tbody>
            </table>
        </div>
        <div id="error-message" class="alert alert-danger" style="display: none;">
            Error loading events. Please try again.
        </div>
        <!--Edit Trigger Modal -->
        <div class="modal fade" id="edit-trigger-modal" tabindex="-1" role="dialog" aria-labelledby="editTriggerModalLabel" aria-hidden="true"  style="display: none;">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                     <div class="modal-header">
                        <h5 class="modal-title" id="editTriggerModalLabel">Edit Trigger</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">×</span>
                        </button>
                     </div>
                  <div class="modal-body">
                      <div class="form-group">
                         <label for="edit-trigger-name">Event Name</label>
                            <input type="text" class="form-control" id="edit-trigger-name" readonly>
                         </div>
                      <div class="form-group">
                         <label for="edit-trigger-time">Event Time</label>
                         <input type="datetime-local" class="form-control" id="edit-trigger-time">
                       </div>
                    </div>
                   <div class="modal-footer">
                      <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                      <button type="button" class="btn btn-primary" onclick="submitEditedTrigger()">Save</button>
                   </div>
                </div>
            </div>
        </div>
         <!--New Trigger Modal -->
        <div class="modal fade" id="new-trigger-modal" tabindex="-1" role="dialog" aria-labelledby="newTriggerModalLabel" aria-hidden="true" style="display: none;">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                     <div class="modal-header">
                        <h5 class="modal-title" id="newTriggerModalLabel">New Trigger</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">×</span>
                        </button>
                     </div>
                  <div class="modal-body">
                      <div class="form-group">
                         <label for="new-trigger-name">Event Name</label>
                            <input type="text" class="form-control" id="new-trigger-name">
                         </div>
                       <div class="form-group">
                           <label for="new-trigger-time">Event Time</label>
                            <input type="datetime-local" class="form-control" id="new-trigger-time" >
                       </div>
                  </div>
                   <div class="modal-footer">
                      <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                       <button type="button" class="btn btn-primary" onclick="submitNewTrigger()">Save</button>
                   </div>
                </div>
            </div>
        </div>
    </div>
</div>